name: snapshot_ui
description: "Capture the accessibility tree of the current iOS simulator screen. Returns a structured representation of all UI elements. Falls back to session default simulator_udid."
category: ui_automation
input:
  properties:
    udid:
      type: string
      required: false
      description: "Simulator UDID. Falls back to session default."
  required: []
output:
  success: "Structured accessibility tree output with element types, labels, identifiers, and frames."
  errors:
    - code: invalid_input
      condition: "No UDID provided and no session default"
    - code: stale_default
      condition: "Session UDID no longer valid"
    - code: dependency_missing
      condition: "axe CLI tool not found"
    - code: command_failed
      condition: "axe dump exited non-zero"
    - code: internal_error
      condition: "Unexpected failure"
idempotent: true
destructive: false
timeout:
  default: "30s"
cancellation: "axe process terminated"
dependencies:
  - axe
sessionDefaults:
  - simulator_udid
nextSteps:
  - tool: tap
    description: "Tap an element by coordinate or identifier"
  - tool: type_text
    description: "Type text into a focused field"
  - tool: swipe
    description: "Swipe on the screen"
  - tool: screenshot
    description: "Take a screenshot for visual verification"
